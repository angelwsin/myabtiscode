<?xml version="1.0" encoding="UTF-8" ?>  
<!DOCTYPE mapper  
PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"  
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.java.mapper.UserMapper">  
                            <select id="getUsers" parameterType="com.java.bean.User" resultType="com.java.bean.User">  
                select 
                                    id as 'id',  
                                    name as 'name',  
                                    age as 'age'  
                                from user
                <where> 
        <if test="id!=null">
  id = #{id}
</if>        <if test="name!=null">
and  name = #{name}
</if>        <if test="age!=null">
and  age = #{age}
</if>    </where>
            </select>
                                <insert id="insertUser" parameterType="com.java.bean.User" useGeneratedKeys="true" keyColumn="id">  
                insert into
                user(
                                                                                            name,  
                                                                            age  
                                                    )  
                values(
                                                                                               #{name},  
                                                                               #{age}  
                                                     )
            </insert>
                                <update id="updateUser" parameterType="com.java.bean.User">  
                update user 
                 <set>
        <if test="id!=null">id = #{id}, </if>
        <if test="name!=null">name = #{name}, </if>
        <if test="age!=null">age = #{age} </if>
    </set>                <where> 
        <if test="id!=null">
  id = #{id}
</if>        <if test="name!=null">
and  name = #{name}
</if>        <if test="age!=null">
and  age = #{age}
</if>    </where>
            </update>
                                <select id="getUserById" parameterType="com.java.bean.User" resultType="com.java.bean.User">  
                select 
                                    id as 'id',  
                                    name as 'name',  
                                    age as 'age'  
                                from user
                <where> 
        <if test="id!=null">
  id = #{id}
</if>        <if test="name!=null">
and  name = #{name}
</if>        <if test="age!=null">
and  age = #{age}
</if>    </where>
            </select>
            </mapper>
